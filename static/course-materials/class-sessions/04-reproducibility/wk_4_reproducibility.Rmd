---
title: "LAS 6292: Data Organization in Spreadsheets"
date: "updated: `r Sys.Date()`"
header-includes:
- \AtBeginDocument{\let\maketitle\relax} # this removes default title section
- \usepackage[default]{sourcesanspro}
- \usepackage{fancyhdr} # modify header into left, center, right
- \pagestyle{fancy} # cues the use of fancy headers
- \fancyfoot{} # cues the use of fancy footer
# month & year on header left
- \fancyhead[L]{LAS 6292 Spring `r format(Sys.time(), '%Y')`, EM Bruna} 
# name and page on header right
- \fancyhead[R]{Data Organization - Spreadsheets, p. \thepage} 
- \fancyfoot[R]{Last update `r format(Sys.time(), '%d %B %Y')`}
# - \usepackage{setspace}{singlespace} # manipulate line spacing 
- \usepackage{parskip} # manipulate indents and spacing before/after paragra phs 
- \usepackage{xcolor} # changes colors of text
# to center to top level (#) headings (my name) and change color of font
# more info # https://www.ctan.org/pkg/sectsty
- \usepackage{sectsty} \sectionfont{\centering\color{darkmidnightblue}}
# to center to sub-sub-headings (###) and change color of font
- \usepackage{sectsty} \subsectionfont{\color{darkmidnightblue}}
# http://latexcolor.com/ to choose colors
# define the colors used above with rgb codes
- \definecolor{darkcerulean}{rgb}{0.03, 0.27, 0.49}
- \definecolor{darkmidnightblue}{rgb}{0.0, 0.2, 0.4}
mainfont: SourceSansPro
geometry: margin=1in
fontsize: 12pt
linkcolor: blue
urlcolor: blue
output:
  pdf_document: default
  # html_document:
  #   df_print: paged
  # rmdformats::robobook: default
---

```{r setup, include=FALSE}
library(knitr)
library(rmdformats)

## Global options
options(max.print="75")
opts_chunk$set(echo=FALSE,
	             cache=TRUE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE)
opts_knit$set(width=75)
```

## Pre-Class Preparation (Instructor):  

**Send in an email to students:  **  

  * reminder we will be live-coding

**Bring to Class:  **  

  * supplies to do PB&J Demo
  * post-its in 2 colors (indicating students doing ok or need help)
  * Tent cards for student names
  * info for R users group, uflibrary R 
  * RStudio shortcuts PC or mac
  * Cheat Sheets Rstudio base r,tidyverse, etc.

## Objectives and Competencies:   

  * Understand and be able to explain the importance of a well-documented, reproducible workflow
  * Be able to outline a logical workflow for data importing and correction
  * Be able to load a file as a dataframe in RStudio, edit the data frame, and save the corrected version as a csv file
  

## Pre-class Preparation (Students):

### **Readings**

Read 1-3 before class. #4 goes into more more detail than is necessary before class, but I include it because it will be more useful as you become more experienced.

1. Laskowski, 2020. What to do when you don't trust your data anymore.  [[read online]](https://laskowskilab.faculty.ucdavis.edu/2020/01/29/retractions/) or {{% staticref "course-materials/readings/Laskowski_2020.pdf" "newtab" %}}[download pdf]{{% /staticref %}}

2. Pennisi, E. 2020. Spider biologist denies suspicions of widespread data fraud in his animal personality research. Science. [[read online]](https://www.sciencemag.org/news/2020/01/spider-biologist-denies-suspicions-widespread-data-fraud-his-animal-personality) or {{% staticref "course-materials/readings/Pennisi_2020.pdf" "newtab" %}}[download pdf]{{% /staticref %}}

3. Alston, J. M., and Rick, J. A.. 2020. A Beginner's Guide to Conducting Reproducible Research. Bull Ecol Soc Am 00( 00):e01801.   [[read online]](https://doi.org/10.1002/bes2.1801) or {{% staticref "course-materials/readings/Alston_Rick_2021_BullEcolSocAm.pdf" "newtab" %}}[download pdf]{{% /staticref %}}

This is goes into more more detail and will be more useful after class:

4.  Wilson G, Bryan J, Cranston K, Kitzes J, Nederbragt L, Teal TK (2017) Good enough practices in scientific computing. PLoS Comput Biol 13(6): e1005510.  [[read online]](https://doi.org/10.1371/journal.pcbi.1005510) or {{% staticref "course-materials/readings/Wilson_etal_2017.pdf" "newtab" %}}[download pdf]{{% /staticref %}}


### **Online Lectures:**  


1. [A Data Sharing and Management Snafu in 3 Short Acts, by the NYU Health Sciences Library](https://www.youtube.com/watch?v=66oNv_DJuPc)

2. These introductions to R and R Studio were made by Professor Ethan White (UF-WEC). They are a good overview of some R basics.  

  * [Intro to R and RStudio](https://www.youtube.com/watch?v=zqUQL8OOtMQ).   
  * [Navigate R and RStudio web page](https://swcarpentry.github.io/r-novice-gapminder/01-rstudio-intro/index.html)    
  * [Intro to R Packages](https://www.youtube.com/watch?v=NAArCsmztOI)  
  * [Expressions and Variables in R](https://www.youtube.com/watch?v=BFVX0CKY67g&feature=emb_title)  

**Reminder:** Don't forget to install the `Tidyverse` library; you can read how on [this page](https://tidyverse.tidyverse.org/). And if you want to get ahead to what we will be doing in class, you can read about how to [Set up a Project in R](https://swcarpentry.github.io/r-novice-gapminder/02-project-intro/index.html)

Computer programming is challenging to learn and teach, especially remotely. The next few sessions we will be using modified version of a style known as:  

  `(1) I do it`   
  `(2) We do it`  
  `(3) You do it`  

This means you first observe me doing something in Rstudio by watching a video (or in this case you'll watch a video of Prof. Ethan White). The in class we will do some tasks together at the same time (aka "live-coding"). This is useful, because you can ask questions as you go. Then, you will work on an assignment based on the tasks we did together, which you will submit as your assignment.


## Class Outline


```{r timer, echo=FALSE}
t1_overview <- 10
breakout1 <- 10
breakout1_return <-20
snack_break <- 10
proj_overview <- 15
cleaning_demo <- 60

total_time <- 
  t1_overview + 
  breakout1 + 
  breakout1_return + 
  snack_break + 
  proj_overview + 
  cleaning_demo 

time_remain <- 180 - total_time
```


### **Topic 1: Intro to Reproducibility:** (`r t1_overview` min)

* Why should we practice ‘Reproducible research’?: Introduce reproducibility and why it is important; answer any student questions

### **Breakout:** (`r breakout1` min)

* What is programming? Write the steps necessary for me to build a peanut-butter and jelly sandwich.

<!-- http://static.zerorobotics.mit.edu/docs/team-activities/ProgrammingPeanutButterAndJelly.pdf -->
<!-- https://www.youtube.com/watch?v=HXl5f2azATU  -->

### **Returning results:** (`r breakout1_return` min)

* Running your Code: Sandwich or No Sandwich?
* Think like a recipie: what do you need, what are the groups of actions taken?
* Programming is first about logic and organization - step away from the computer and diagram the objectives and steps.
* Break things into modular components.


### **Break** (`r snack_break` min)

### **Coding Corrections: Intro**  (`r proj_overview` min)

* We're going to practice the routine for reproducible data correction. Applies to any coding problem.
* Step 1: step away from the computer. My first step in the process is to look over the file and map out what needs to be done.
* Remember last time when we looked at the data and found mistakes? Take 5 minutes and do that again.


### **Coding Corrections: Implement the Changes**(`r cleaning_demo` min)

  * **Key Points to teach emphasize:**
      
    1. to keep track of progress, we will try the following: raise hand or pink post-it = I need help, thumbs up or yellow post-it = I'm good.
    2. Create an RStudio Project: `data_raw`, `data_clean`, `scripts`
    3. Move the file into the data_raw folder
    4. New .r file 
    5. add key info: session info(), name and what for, etc.
    6. Load tidyverse
    7. import csv
    8. make changes

    * add column
    * change tolower
    * save as csv
    * sweep the environment, restart r, rerun to make sure it works
    * read colnmaes
    * change column names
    * get summary of data types str, glimpse
    * change Data Types
    * change to a column to lower 
    * change a column to upper
    * order factor
    * add a column
    * add a calculation
    * Export clean data


**KEY MESSAGES:** (1) Keep raw data raw (2) annotate. lots.

### **Coding Corrections: Now do it on your own** (`r time_remain` min)

<!-- https://dataoneorg.github.io/Education/lessons/09_analysis/09_analysis.pdf -->
<!-- https://www.dataquest.io/blog/load-clean-data-r-tidyverse/  -->

Now do it on your own, with a new dataset.  

Here is the dataset, and here are the instructions. Can you reproduce the results? don't forget to sweep the environment and restart r

# Tools & Resources

# Sources


## **Week 4: Reproducible data (re)organization**

1. [The humanities have a ‘reproducibility’ problem](https://talkinghumanities.blogs.sas.ac.uk/2019/07/09/the-humanities-have-a-reproducibility-problem/)
2. [The humanities do not need a replication drive](https://www.cwts.nl/blog?article=n-r2v2a4&title=the-humanities-do-not-need-a-replication-drive)
3. [Reproducible Research: A primer for the social sciences](http://benmarwick.github.io/CSSS-Primer-Reproducible-Research)
4. [Replicability and replication in the humanities](https://researchintegrityjournal.biomedcentral.com/articles/10.1186/s41073-018-0060-4)
1. [Towards reproducible science in the digital humanities](https://dhh.uni.lu/2020/05/19/towards-reproducible-science-in-the-digital-humanities-how-to-publish-your-data-and-code-alongside-your-research-with-the-help-of-zenodo/)
1. [The possibility and desirability of replication in the humanities](https://www.nature.com/articles/s41599-018-0149-x)
1. [Reproducible Research: A Retrospective](https://www.annualreviews.org/doi/10.1146/annurev-publhealth-012420-105110#_i18)
1. [Ten simple rules for biologists learning to program](https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005871)

1. [janitor package](https://github.com/sfirke/janitor) (cleanup of file names, etc.)
1. [How to clean messy data in R](https://rfortherestofus.com/2019/12/how-to-clean-messy-data-in-r/)  
1 [The Ultimate Guide to Data Cleaning](https://towardsdatascience.com/the-ultimate-guide-to-data-cleaning-3969843991d4)


<!-- 4. [Reproducible Research in the Humanities](https://www.slideshare.net/IainEmsley/reproducible-research-in-the-humanities) -->
<!-- 4. https://oxford.universitypressscholarship.com/view/10.1093/oso/9780190670412.001.0001/oso-9780190670412-miscMatter-11 -->
<!-- 1. [Reproducible Data Science](https://ecorepsci.github.io/reproducible-science/)  -->


### Reading 

*  Lewis, Keith P., Eric Vander Wal, and David A. Fifield. 2018. Wildlife biology, big data, and reproducible research. Wildlife Society Bulletin 42(1): 172-179.  

*  Bryan, J. (2018). Excuse me, do you have a moment to talk about version control? The American Statistician, 72(1), 20-27.

*  Wilson, Greg, Jennifer Bryan, Karen Cranston, Justin Kitzes, Lex Nederbragt, and Tracy K. Teal. Good enough practices in scientific computing. PLoS Computational Biology 13, no. 6 (2017): e1005510.  

*  White EP, Baldridge E, Brym ZT, Locey KJ, McGlinn DJ, Supp SR.  2013.  Nine simple ways to make it easier to (re)use your data. Ideas in Ecology and Evolution. 6(2):1-10.  


